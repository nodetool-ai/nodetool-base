{
  "id": "3047c2fa760811f0b24700002df0a13c",
  "access": "public",
  "created_at": "2025-08-10T19:44:26.840089",
  "updated_at": "2025-08-10T19:44:26.840102",
  "name": "Index PDFs",
  "description": "Workflow to index PDFs in a folder into a Chroma collection",
  "tags": ["rag","start"],
  "thumbnail": null,
  "thumbnail_url": null,
  "graph": {
    "nodes": [
      {
        "id": "8eb41cfc-5d93-4564-aedb-2ca0dc78e5ea",
        "parent_id": null,
        "type": "lib.os.ListFiles",
        "data": {
          "directory": {
            "type": "file_path",
            "path": "/Users/mg/papers"
          },
          "pattern": "*.pdf",
          "recursive": false
        },
        "ui_properties": {
          "position": {
            "x": 58,
            "y": 265
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "49cc8e4b-16a3-4a7a-b4c5-7b31d4692d4c",
        "parent_id": null,
        "type": "chroma.collections.Collection",
        "data": {
          "name": "papers2",
          "embedding_model": {
            "type": "llama_model",
            "repo_id": "nomic-embed-text:latest"
          }
        },
        "ui_properties": {
          "position": {
            "x": 808,
            "y": 54
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "4e1c87dc-f5f9-4b3b-9e69-7c1eb3c6db2b",
        "parent_id": null,
        "type": "lib.os.LoadDocumentFile",
        "data": {},
        "ui_properties": {
          "position": {
            "x": 318,
            "y": 341
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "2124c93f-67fd-4c20-a0fb-e6cdbe9a0836",
        "parent_id": null,
        "type": "lib.pymupdf.ExtractText",
        "data": {
          "start_page": 0,
          "end_page": 4
        },
        "ui_properties": {
          "position": {
            "x": 548,
            "y": 313
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "38b8d1be-8a9b-4aea-ae51-11c0128af08e",
        "parent_id": null,
        "type": "chroma.index.IndexTextChunks",
        "data": {},
        "ui_properties": {
          "position": {
            "x": 1068,
            "y": 101
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "be7780f2-1fb6-4efa-8e20-51e7e388fc40",
        "parent_id": null,
        "type": "lib.langchain.SentenceSplitter",
        "data": {
          "min_length": 1024,
          "chunk_size": 512,
          "chunk_overlap": 256
        },
        "ui_properties": {
          "position": {
            "x": 808,
            "y": 266
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "7fdb6281-4691-42cb-bb74-86bc78392531",
        "parent_id": null,
        "type": "lib.os.PathToString",
        "data": {},
        "ui_properties": {
          "position": {
            "x": 548,
            "y": 157
          },
          "zIndex": 0,
          "width": 200,
          "selectable": true
        },
        "dynamic_properties": {}
      },
      {
        "id": "947930ae-dbb0-4c5a-ba90-0079e9aa768a",
        "parent_id": null,
        "type": "nodetool.workflows.base_node.Comment",
        "data": {
          "comment_lexical": {
            "root": {
              "children": [
                {
                  "children": [
                    {
                      "detail": 0,
                      "format": 1,
                      "mode": "normal",
                      "style": "",
                      "text": "PDF Paper Indexing Workflow",
                      "type": "text",
                      "version": 1
                    }
                  ],
                  "direction": "ltr",
                  "format": "",
                  "indent": 0,
                  "type": "paragraph",
                  "version": 1,
                  "textFormat": 0,
                  "textStyle": ""
                },
                {
                  "children": [
                    {
                      "detail": 0,
                      "format": 0,
                      "mode": "normal",
                      "style": "",
                      "text": "This workflow scans a local folder for PDF papers, loads each document, extracts its text, splits it into overlapping sentence chunks, embeds them using ",
                      "type": "text",
                      "version": 1
                    },
                    {
                      "detail": 0,
                      "format": 1,
                      "mode": "normal",
                      "style": "",
                      "text": "NOMIC-BERT (137M)",
                      "type": "text",
                      "version": 1
                    },
                    {
                      "detail": 0,
                      "format": 0,
                      "mode": "normal",
                      "style": "",
                      "text": ", and stores them in a ",
                      "type": "text",
                      "version": 1
                    },
                    {
                      "detail": 0,
                      "format": 1,
                      "mode": "normal",
                      "style": "",
                      "text": "Chroma",
                      "type": "text",
                      "version": 1
                    },
                    {
                      "detail": 0,
                      "format": 0,
                      "mode": "normal",
                      "style": "",
                      "text": " collection for semantic search.",
                      "type": "text",
                      "version": 1
                    }
                  ],
                  "direction": "ltr",
                  "format": "",
                  "indent": 0,
                  "type": "paragraph",
                  "version": 1,
                  "textFormat": 0,
                  "textStyle": ""
                },
                {
                  "children": [],
                  "direction": null,
                  "format": "",
                  "indent": 0,
                  "type": "paragraph",
                  "version": 1,
                  "textFormat": 0,
                  "textStyle": ""
                },
                {
                  "children": [
                    {
                      "detail": 0,
                      "format": 1,
                      "mode": "normal",
                      "style": "",
                      "text": "Steps",
                      "type": "text",
                      "version": 1
                    },
                    {
                      "detail": 0,
                      "format": 0,
                      "mode": "normal",
                      "style": "",
                      "text": ":",
                      "type": "text",
                      "version": 1
                    }
                  ],
                  "direction": "ltr",
                  "format": "",
                  "indent": 0,
                  "type": "paragraph",
                  "version": 1,
                  "textFormat": 1,
                  "textStyle": ""
                },
                {
                  "children": [
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "List Files",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Finds all *.pdf files in the defined folder",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "textFormat": 1,
                      "value": 1
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Load Document File",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Opens each PDF.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 2
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Extract Text",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Extracts text from page 0\u20134.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 3
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Path to String",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Converts file path for document ID use.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 4
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Split into Sentences",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Chunks text into 512-token segments with 256-token overlap.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 5
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Collection",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Defines Chroma collection and embedding model.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 6
                    },
                    {
                      "children": [
                        {
                          "detail": 0,
                          "format": 1,
                          "mode": "normal",
                          "style": "",
                          "text": "Index Text Chunks",
                          "type": "text",
                          "version": 1
                        },
                        {
                          "detail": 0,
                          "format": 0,
                          "mode": "normal",
                          "style": "",
                          "text": " \u2013 Stores chunks + embeddings in Chroma for later retrieval.",
                          "type": "text",
                          "version": 1
                        }
                      ],
                      "direction": "ltr",
                      "format": "",
                      "indent": 0,
                      "type": "listitem",
                      "version": 1,
                      "value": 7
                    }
                  ],
                  "direction": "ltr",
                  "format": "",
                  "indent": 0,
                  "type": "list",
                  "version": 1,
                  "textFormat": 1,
                  "listType": "number",
                  "start": 1,
                  "tag": "ol"
                },
                {
                  "children": [],
                  "direction": null,
                  "format": "",
                  "indent": 0,
                  "type": "paragraph",
                  "version": 1,
                  "textFormat": 0,
                  "textStyle": ""
                }
              ],
              "direction": "ltr",
              "format": "",
              "indent": 0,
              "type": "root",
              "version": 1,
              "textFormat": 1
            }
          }
        },
        "ui_properties": {
          "position": {
            "x": 42,
            "y": -384
          },
          "zIndex": 0,
          "width": 719,
          "height": 342,
          "selectable": true
        },
        "dynamic_properties": {}
      }
    ],
    "edges": [
      {
        "id": "8d78dec5-a4f3-4bd4-8f7b-6ecab2a8d08f",
        "source": "2124c93f-67fd-4c20-a0fb-e6cdbe9a0836",
        "sourceHandle": "output",
        "target": "be7780f2-1fb6-4efa-8e20-51e7e388fc40",
        "targetHandle": "text",
        "ui_properties": {
          "className": "str"
        }
      },
      {
        "id": "99f645c0-dae3-4e62-b34e-80486ed0ec1b",
        "source": "4e1c87dc-f5f9-4b3b-9e69-7c1eb3c6db2b",
        "sourceHandle": "output",
        "target": "2124c93f-67fd-4c20-a0fb-e6cdbe9a0836",
        "targetHandle": "pdf",
        "ui_properties": {
          "className": "document"
        }
      },
      {
        "id": "6373ee98-6b55-4582-a139-f55393164aea",
        "source": "be7780f2-1fb6-4efa-8e20-51e7e388fc40",
        "sourceHandle": "output",
        "target": "38b8d1be-8a9b-4aea-ae51-11c0128af08e",
        "targetHandle": "text_chunks",
        "ui_properties": {
          "className": "list"
        }
      },
      {
        "id": "b0b00794-2a0e-4bcb-9d24-86f78f432c5f",
        "source": "49cc8e4b-16a3-4a7a-b4c5-7b31d4692d4c",
        "sourceHandle": "output",
        "target": "38b8d1be-8a9b-4aea-ae51-11c0128af08e",
        "targetHandle": "collection",
        "ui_properties": {
          "className": "chroma_collection"
        }
      },
      {
        "id": "8911561e-f326-4cd8-8eb1-26f4c84b0b5d",
        "source": "8eb41cfc-5d93-4564-aedb-2ca0dc78e5ea",
        "sourceHandle": "file",
        "target": "4e1c87dc-f5f9-4b3b-9e69-7c1eb3c6db2b",
        "targetHandle": "path",
        "ui_properties": {
          "className": "file_path"
        }
      },
      {
        "id": "253f1e62-b4ea-491e-bd6d-ded81eb98984",
        "source": "8eb41cfc-5d93-4564-aedb-2ca0dc78e5ea",
        "sourceHandle": "file",
        "target": "7fdb6281-4691-42cb-bb74-86bc78392531",
        "targetHandle": "file_path",
        "ui_properties": {
          "className": "file_path"
        }
      },
      {
        "id": "627f0ebd-c274-4682-b08c-710483ca725f",
        "source": "7fdb6281-4691-42cb-bb74-86bc78392531",
        "sourceHandle": "output",
        "target": "be7780f2-1fb6-4efa-8e20-51e7e388fc40",
        "targetHandle": "document_id",
        "ui_properties": {
          "className": "str"
        }
      }
    ]
  },
  "input_schema": null,
  "output_schema": null,
  "settings": null,
  "package_name": "nodetool-base",
  "path": null,
  "run_mode": null
}